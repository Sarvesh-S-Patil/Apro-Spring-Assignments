package com.apro.main.service;

import java.util.List;
import java.util.Optional;

import org.springframework.beans.factory.annotation.Autowired;

import com.apro.main.entity.Bank;
import com.apro.main.entity.SalaryAccount;
import com.apro.main.repository.BankRepository;

public class BankService {
	@Autowired
	BankRepository bankRepository;
	
	public Bank addBank(Bank bank) {
		 return bankRepository.save(bank);
	}
	
	public Bank getBankById(long bankId) {
		Optional<Bank> optionalBank = bankRepository.findById(bankId);
		if(!optionalBank.isPresent())
			return null;
		return optionalBank.get();
	}
	
	public Bank addNewBankAccount(long bankId,SalaryAccount account) {
		Bank bank = bankRepository.findById(bankId).get();
		if(bank == null)
			return null;
		List<SalaryAccount> accounts = bank.getAccounts();
		accounts.add(account);
		bank.setAccounts(accounts);
		return bankRepository.save(bank);
	}
}
